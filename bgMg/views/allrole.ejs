<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>角色管理</title>
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--<link href='http://fonts.useso.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>-->
  <link rel="stylesheet" type="text/css" href="/lib/bootstrap/css/bootstrap.css">
  <link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.css">

  <script src="/lib/jquery-1.11.1.min.js" type="text/javascript"></script>

  <script src="/lib/jQuery-Knob/js/jquery.knob.js" type="text/javascript"></script>
  <script type="text/javascript">
    $(function () {
//      $(".knob").knob();
    });
  </script>


  <link rel="stylesheet" type="text/css" href="/stylesheets/theme.css">
  <link rel="stylesheet" type="text/css" href="/stylesheets/premium.css">

</head>
<body class=" theme-blue">

<!-- Demo page code -->

<script type="text/javascript">
  $(function () {
    var match = document.cookie.match(new RegExp('color=([^;]+)'));
    if (match) var color = match[1];
    if (color) {
      $('body').removeClass(function (index, css) {
        return (css.match(/\btheme-\S+/g) || []).join(' ')
      })
      $('body').addClass('theme-' + color);
    }

//    $('[data-popover="true"]').popover({html: true});

  });
</script>
<style type="text/css">
  #line-chart {
    height: 300px;
    width: 800px;
    margin: 0px auto;
    margin-top: 1em;
  }

  .navbar-default .navbar-brand, .navbar-default .navbar-brand:hover {
    color: #fff;
  }
  a:hover{
    cursor: pointer;
  }
</style>

<script type="text/javascript">
  $(function () {
    var uls = $('.sidebar-nav > ul > *').clone();
    uls.addClass('visible-xs');
    $('#main-menu').append(uls.clone());
  });
</script>

<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!-- Le fav and touch icons -->
<link rel="shortcut icon" href="../assets/ico/favicon.ico">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
<link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">


<!--[if lt IE 7 ]>
<body class="ie ie6"> <![endif]-->
<!--[if IE 7 ]>
<body class="ie ie7 "> <![endif]-->
<!--[if IE 8 ]>
<body class="ie ie8 "> <![endif]-->
<!--[if IE 9 ]>
<body class="ie ie9 "> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->

<!--<![endif]-->

<%include head.ejs%>
<%include allmenue.ejs%>

<div class="content">
  <div class="header">

    <h1 class="page-title">角色管理</h1>
    <ul class="breadcrumb">
      <li><a href="#">用户管理</a> </li>
      <li class="active">角色管理</li>
    </ul>

  </div>
  <div class="main-content">

    <div class="btn-toolbar list-toolbar">
      <a href="/addrole.do"><button class="btn btn-primary"><i class="fa fa-plus"></i>添加角色</button></a>
      <!--<button class="btn btn-default">Import</button>-->
      <!--<button class="btn btn-default">Export</button>-->
      <div class="btn-group">
      </div>
    </div>
    <table class="table">
      <thead>
      <tr>
        <th>角色ID</th>
        <th>角色名称</th>
        <th>所有权限</th>
        <th style="width: 3.5em;">操作</th>
      </tr>
      </thead>
      <tbody id="tbody">
      <%for(var i=0;i<list.length;i++){%>
      <tr>
        <td><%=list[i].role_id%></td>
        <td><%=list[i].role_name%></td>
        <td><%=list[i].role_control%></td>
        <td>
          <a href="/changerole1.do?id=<%=list[i].role_id%>"  class="role_change" target="_self"><i class="fa fa-pencil"></i></a>
          <a href="#myModal" role="button" data-toggle="modal" class="role_del"><i class="fa fa-trash-o"></i></a>
        </td>
      </tr>
      <%}%>
      </tbody>
    </table>

    <ul class="pagination">
      <li><a href="#">&laquo;</a></li>
      <%for(var j=1;j<=totalcount;j++){%>
      <li><a href="<%=j%>"><%=j%></a></li>
      <%}%>
      <!--<li><a href="#">1</a></li>-->
      <!--<li><a href="#">2</a></li>-->
      <!--<li><a href="#">3</a></li>-->
      <!--<li><a href="#">4</a></li>-->
      <!--<li><a href="#">5</a></li>-->
      <li><a href="#">&raquo;</a></li>
    </ul>

    <div class="modal small fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="myModalLabel">删除确认</h3>
          </div>
          <div class="modal-body">
            <p class="error-text"><i class="fa fa-warning modal-icon"></i>你确定要删除这条数据？<br>删除后将无法恢复！</p>
          </div>
          <div class="modal-footer">
            <button class="btn btn-default" data-dismiss="modal" aria-hidden="true">取消</button>
            <button class="btn btn-danger" data-dismiss="modal" id="delRole">删除</button>
          </div>
        </div>
      </div>
    </div>


    <footer>
      <hr>
    </footer>
  </div>
</div>


<script src="/lib/bootstrap/js/bootstrap.js"></script>
<script src="/lib/jquery-1.11.1.min.js"></script>
<!--<script src="/myajax.js"></script>-->
<script type="text/javascript">
//  $("[rel=tooltip]").tooltip();
  $(function () {
    $('.demo-cancel-click').click(function () {
      return false;
    });
  });

  var role_id1;
  $(document).on("click",".role_del",function() {
    role_id1 = $($(this).parent().parent().find("td")[0]).html();
    console.log(role_id1);
  })
//
//
//    /* ******************************************* */
//      var xhr;
//      if(window.XMLHttpRequest){
//        xhr = new XMLHttpRequest()
//      }else{
//        xhr = new ActiveXObject("Microsoft.XMLHTTP")
//      }
//      xhr.onreadystatechange=function(){
//        if(xhr.readyState==4){
//          console.log(xhr.responseText);    //响应的内容
//        }
//      }
//      xhr.open("get","/rolesession.do?role_id1="+role_id1);
//      xhr.send(null)
//
//    /* ******************************************* */
////    myAjax("get","/rolesession.do","role_id1="+role_id1,function(){
////      console.log(role_id1);
////    })
//  });

  $("#delRole").click(function(){
    $.ajax({
      type:"get",
      url:"/delRole.do",
      data:{
        role_id:role_id1
      },
      success:function(){
//        console.log(data);
        location.href='/allrole';
      }
    })
  })
//function changeRole(){
//  $.ajax({
//    type:"post",
//    url:"/changerole1.do",
//    dataType:"json",
//    data:{
//      id:id
//    },
//    success:function(data){
//
//    }
//  })
//}


  /* ****************************************分页********************************** */
//var page;
//$(document).on("click",".page",function() {
//  page = $(this).html();
//  console.log(page);
//  $.ajax({
//    type:"get",
//    url:"roleTotal.do",
//    data:{
//      page:page
//    },
//    success:function(data){
//      console.log(data);
//      document.getElementById("tbody").innerHTML="";
//      for(var i=0;i<data.length;i++){
//        document.getElementById("tbody").innerHTML+="<tr>"+
//                        "<td>"+data[i].role_id+"<td>"+
//                        "<td>"+data[i].role_name+"<td>"+
//                        "<td>"+data[i].role_control+"<td>"+
//                        "<td><a href='changerole?id=data[i].role_id' class='role_change'><i class='fa fa-pencil'></i></a><a href='#myModal' role='button' data-toggle='modal' class='role_del'><i class='fa fa-trash-o'></i></a></td>"+
//                        "</tr>"
//
//        ;
//      }
//    }
//  })
//})


  /* ****************************************分页********************************** */

</script>


</body>
</html>